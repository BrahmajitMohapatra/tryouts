#!/usr/bin/ruby

# = Mockout
# 
# This mock is used to generate test output for Tryouts itself.
# It is otherwise uninteresting!
#

require 'rubygems'
require 'drydock'
require 'yaml'

begin; require 'json'; rescue LoadError; end   # json may not be installed

module DrillCLI 
  extend Drydock
  
  global :f, :format, String, "One of: json, yaml, string (default)"
  #global :V, :verbose do |v|
  #  @verbose = v
  #end
  
  default :sergeant
  
  option :e, :echo, "Echo the arguments"
  command :sergeant do |obj|
    format = obj.global.format.nil? ? nil : "to_#{obj.global.format}"
    format = nil if obj.global.format == 'string'
    out = StringIO.new
    if obj.option.echo
      out.puts obj.argv
    else
      players = ['d-bam', 'alberta', 'birds', 'condor man']
      coaches = ['greg', 'rupaul', 'telly', 'prince kinko']
      out.puts '#'*54
      out.puts "%9s %44s" % ["Date:", "2009-02-16"]
      out.puts '='*54
      out.puts "%9s %44s" % ["Players:", players.join(', ')]
      out.puts '-'*54
      out.puts "%9s %44s" % ["Coaches:", coaches.join('|')]
    end
    out.rewind
    ary = out.readlines
    puts format.nil? ? ary : ary.send(format)
  end
  
end