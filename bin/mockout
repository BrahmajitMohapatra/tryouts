#!/usr/bin/ruby

# = Mockout
# 
# This mock is used to generate test output for Tryouts itself.
# It is otherwise uninteresting!
#

require 'rubygems'
require 'drydock'
require 'yaml'

begin; require 'json'; rescue LoadError; end   # json may not be installed

module DrillCLI 
  extend Drydock
  
  global :f, :format, String, "One of: json, yaml, string (default)"
  
  
  default :info
  debug :on
  
  data = {
    "Date" => "2009-02-16",
    "Owners" => ["greg", "rupaul", "telly", "prince kinko"],
    "Players" => ["d-bam", "alberta", "birds", "condor man"]
  }
  
  option :e, :echo, "Echo the arguments"
  command :info do |obj|
    format = obj.global.format.nil? ? nil : "to_#{obj.global.format}"
    format = nil if obj.global.format == 'string'
    if obj.option.echo
      puts obj.argv
    else
      if format.nil?
        data.keys.sort.each do |n|
          val = data[n]
          val = val.join(', ') if val.is_a?(Array)
          puts "%9s %44s" % ["#{n}:", val]
        end
      else
        puts data.send(format)
      end
    end
  end
  
end